<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Bouncibility: C:/Users/chase/Desktop/game2/edge/bouncibility/include/PhysicsManager.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>C:/Users/chase/Desktop/game2/edge/bouncibility/include/PhysicsManager.h</h1><a href="_physics_manager_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#pragma once</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span>
<a name="l00003"></a>00003 <span class="preprocessor">#include "<a class="code" href="_common_8h.html">Common.h</a>"</span>
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 <span class="keyword">namespace </span>irr{
<a name="l00007"></a>00007         <span class="keyword">namespace </span>newton{
<a name="l00008"></a>00008                 <span class="keyword">class </span>IWorld;
<a name="l00009"></a>00009                 <span class="keyword">class </span>IMaterial;
<a name="l00010"></a>00010                 <span class="keyword">class </span>IMaterialCollisionCallback;
<a name="l00011"></a>00011                 <span class="keyword">class </span>IMaterialPair;
<a name="l00012"></a>00012         }
<a name="l00013"></a>00013 }
<a name="l00014"></a>00014 <span class="keyword">class </span>SomethingForScripts;;
<a name="l00015"></a>00015 
<a name="l00017"></a><a class="code" href="namespace_physics.html">00017</a> <span class="keyword">namespace </span>Physics{
<a name="l00018"></a>00018 
<a name="l00019"></a><a class="code" href="namespace_physics.html#77dcfe95e6112ea67f22646268687c26">00019</a>         <span class="keyword">typedef</span> std::map&lt;std::string, irr::newton::IMaterial*&gt; <a class="code" href="namespace_physics.html#77dcfe95e6112ea67f22646268687c26">StrMaterialMap</a>;
<a name="l00020"></a>00020 
<a name="l00021"></a><a class="code" href="namespace_physics.html#005c460c7b5cf110b2a34c77c7108793">00021</a>         <span class="keyword">typedef</span> std::map&lt;std::string, irr::newton::IMaterialCollisionCallback*&gt; <a class="code" href="namespace_physics.html#005c460c7b5cf110b2a34c77c7108793">StrCollisionCallbackMap</a>;
<a name="l00022"></a>00022 
<a name="l00023"></a><a class="code" href="namespace_physics.html#8448207f7179b4ade16ee09057fdc9bc">00023</a>         <span class="keyword">typedef</span> std::vector&lt;SomethingForScripts*&gt; <a class="code" href="namespace_physics.html#8448207f7179b4ade16ee09057fdc9bc">ScriptVector</a>;
<a name="l00024"></a>00024 
<a name="l00026"></a><a class="code" href="class_physics_1_1_world_entity_collision_callback.html">00026</a>         <span class="keyword">class </span><a class="code" href="class_physics_1_1_world_entity_collision_callback.html" title="Class containing the callback method for the Physics system. This derived class maintains...">WorldEntityCollisionCallback</a> : IMaterialCollisionCallback{
<a name="l00027"></a>00027                 
<a name="l00028"></a><a class="code" href="class_physics_1_1_world_entity_collision_callback.html#26296dff3e049d7a5287bd11e02eae60">00028</a>                 <span class="keyword">friend</span> class ::PhysicsManager;
<a name="l00029"></a>00029 
<a name="l00030"></a>00030         <span class="keyword">private</span>:
<a name="l00031"></a><a class="code" href="class_physics_1_1_world_entity_collision_callback.html#16c57b73e9116788f6b903b85a84a2e0">00031</a>                 <span class="keyword">const</span> std::string&amp; <a class="code" href="class_physics_1_1_world_entity_collision_callback.html#16c57b73e9116788f6b903b85a84a2e0">m_Material1</a>;
<a name="l00032"></a><a class="code" href="class_physics_1_1_world_entity_collision_callback.html#4f2bcdad8fdacf63860d5f0fefdf91c8">00032</a>                 <span class="keyword">const</span> std::string&amp; <a class="code" href="class_physics_1_1_world_entity_collision_callback.html#4f2bcdad8fdacf63860d5f0fefdf91c8">m_Material2</a>;
<a name="l00033"></a>00033 
<a name="l00034"></a><a class="code" href="class_physics_1_1_world_entity_collision_callback.html#f10783c0f8333407693db9feff8f6084">00034</a>                 <a class="code" href="namespace_physics.html#8448207f7179b4ade16ee09057fdc9bc">ScriptVector</a> <a class="code" href="class_physics_1_1_world_entity_collision_callback.html#f10783c0f8333407693db9feff8f6084">m_CollisionHandlerScripts</a>;
<a name="l00035"></a>00035 
<a name="l00036"></a>00036         <span class="keyword">public</span>:
<a name="l00037"></a>00037                 <span class="keywordtype">int</span> <a class="code" href="class_physics_1_1_world_entity_collision_callback.html#5ac3afc6ad361d3e2579938e029c3548">ContactEnd</a>(irr::newton::IMaterialPair* material_pair);
<a name="l00038"></a>00038 
<a name="l00039"></a>00039                 <span class="keywordtype">void</span> <a class="code" href="class_physics_1_1_world_entity_collision_callback.html#9a1d16985d6bc618de53c7acfb5879f4">addHandler</a>();
<a name="l00040"></a>00040         }
<a name="l00041"></a>00041 }
<a name="l00042"></a>00042 
<a name="l00044"></a><a class="code" href="class_physics_manager.html">00044</a> <span class="keyword">class </span><a class="code" href="class_physics_manager.html" title="LevelManager organizes the transition of levels. It The current level should be retrieved...">PhysicsManager</a> :
<a name="l00045"></a>00045         <span class="keyword">public</span> <a class="code" href="class_c_singleton.html" title="The CSingleton class is a template class for creating singleton objects.">CSingleton</a>&lt;PhysicsManager&gt;{
<a name="l00046"></a>00046 <span class="keyword">private</span>:
<a name="l00047"></a>00047 
<a name="l00048"></a><a class="code" href="class_physics_manager.html#37c36ea40f4d8911ae5a26cf203f5f88">00048</a>         <span class="keyword">static</span> irr::newton::IWorld* <a class="code" href="class_physics_manager.html#37c36ea40f4d8911ae5a26cf203f5f88">s_World</a>;
<a name="l00049"></a>00049 
<a name="l00050"></a><a class="code" href="class_physics_manager.html#082e38f852468125dfce1ae9ca9fd84c">00050</a>         <span class="keywordtype">float</span> <a class="code" href="class_physics_manager.html#082e38f852468125dfce1ae9ca9fd84c">m_Gravity</a>;
<a name="l00051"></a>00051 
<a name="l00052"></a><a class="code" href="class_physics_manager.html#25b723d5691748af54f7ab29244c11db">00052</a>         std::string <a class="code" href="class_physics_manager.html#25b723d5691748af54f7ab29244c11db">m_MaterialDefinition</a>;
<a name="l00053"></a>00053 
<a name="l00054"></a><a class="code" href="class_physics_manager.html#4ccc9fdc1088452892f6f60a20ebbfeb">00054</a>         <a class="code" href="namespace_physics.html#77dcfe95e6112ea67f22646268687c26">StrMaterialMap</a> <a class="code" href="class_physics_manager.html#4ccc9fdc1088452892f6f60a20ebbfeb" title="The list of levels in order for this scenario, XML files to each different level...">m_MaterialMap</a>; 
<a name="l00055"></a>00055 
<a name="l00056"></a><a class="code" href="class_physics_manager.html#a03a5a5df8d30ba19bf4ec9fc8e86b25">00056</a>         StrMaterialMap::iterator <a class="code" href="class_physics_manager.html#a03a5a5df8d30ba19bf4ec9fc8e86b25" title="An iterator for the Level list. Pointing to the current level during game execution...">m_MaterialItr</a>; 
<a name="l00057"></a>00057 
<a name="l00058"></a>00058         <a class="code" href="class_physics_manager.html#bee8b0945994b58f3847aade4a73cba9">PhysicsManager</a>();
<a name="l00059"></a>00059         <a class="code" href="class_physics_manager.html#c41c46fb62b8104b3d5d5bf6bcf7b2f5">~PhysicsManager</a>();
<a name="l00060"></a>00060         <a class="code" href="class_physics_manager.html#bee8b0945994b58f3847aade4a73cba9">PhysicsManager</a>(<span class="keyword">const</span> <a class="code" href="class_physics_manager.html" title="LevelManager organizes the transition of levels. It The current level should be retrieved...">PhysicsManager</a>&amp; rhs);
<a name="l00061"></a>00061         <a class="code" href="class_physics_manager.html" title="LevelManager organizes the transition of levels. It The current level should be retrieved...">PhysicsManager</a>&amp; <a class="code" href="class_physics_manager.html#35ec27c64a9e944a7d61e9624b78af06">operator=</a>(<span class="keyword">const</span> <a class="code" href="class_physics_manager.html" title="LevelManager organizes the transition of levels. It The current level should be retrieved...">PhysicsManager</a>&amp; rhs);
<a name="l00062"></a>00062 <span class="keyword">public</span>:
<a name="l00063"></a><a class="code" href="class_physics_manager.html#273bc4a1cbb135f105e3d98560962f0f">00063</a>         <span class="keyword">friend</span> <a class="code" href="class_c_singleton.html" title="The CSingleton class is a template class for creating singleton objects.">CSingleton&lt;PhysicsManager&gt;</a>;
<a name="l00064"></a>00064 
<a name="l00066"></a>00066         <span class="keywordtype">bool</span> <a class="code" href="class_physics_manager.html#7fef10654ef428cfc1d04d382abd7ed3" title="Initialize the LevelManager system. Provide the filename of the XML file that has...">init</a>(irr::IrrlichtDevice* <a class="code" href="main_8cpp.html#3f4aa71242d090e6f84100dbf2d69424">device</a>, <span class="keyword">const</span> std::string&amp; XMLMaterialDefinition); 
<a name="l00067"></a>00067 
<a name="l00069"></a>00069         <span class="keywordtype">bool</span> <a class="code" href="class_physics_manager.html#34bec6eb648e7a1ebab903943a6aa21a" title="Add new entity definitions. This function is the same as init in that it loads in...">addNewDefinitions</a>(<span class="keyword">const</span> std::string&amp; XMLMaterialDefinition);
<a name="l00070"></a>00070 
<a name="l00072"></a><a class="code" href="class_physics_manager.html#3133bb5e25d0bf96c9b291533075a541">00072</a>         <span class="keywordtype">bool</span> <a class="code" href="class_physics_manager.html#3133bb5e25d0bf96c9b291533075a541" title="The given WorldEntity will be called whenever a collision occurs between.">addObserver</a>(<a class="code" href="class_world_entity.html">WorldEntity</a>* entity, std::string&amp; material1, std::string&amp; material2)
<a name="l00073"></a>00073 
<a name="l00074"></a>00074         <span class="keywordtype">float</span> getGravity()<span class="keyword"> const</span>{
<a name="l00075"></a>00075                 <span class="keywordflow">return</span> <a class="code" href="class_physics_manager.html#082e38f852468125dfce1ae9ca9fd84c">m_Gravity</a>;
<a name="l00076"></a>00076         }
<a name="l00077"></a>00077 
<a name="l00078"></a><a class="code" href="class_physics_manager.html#f86b6aeb67d74e7807e34adc597e9121">00078</a>         <span class="keywordtype">void</span> <a class="code" href="class_physics_manager.html#f86b6aeb67d74e7807e34adc597e9121">setGravity</a>(<span class="keywordtype">float</span> newGravity){
<a name="l00079"></a>00079                 <a class="code" href="class_physics_manager.html#082e38f852468125dfce1ae9ca9fd84c">m_Gravity</a> = newGravity;
<a name="l00080"></a>00080         }
<a name="l00081"></a>00081 
<a name="l00082"></a>00082         <span class="keywordtype">bool</span> <a class="code" href="class_physics_manager.html#987f38f4fb86a42adce7ef063b09c7fe">buttonStatus</a>(<span class="keywordtype">int</span> code) <span class="keyword">const</span>;
<a name="l00083"></a>00083 
<a name="l00084"></a>00084         <span class="keywordtype">bool</span> <a class="code" href="class_physics_manager.html#acaf1d29e0f5dd589e15ff84e2bb8695">operator()</a>(<span class="keywordtype">int</span> code) <span class="keyword">const</span>;
<a name="l00085"></a>00085         <span class="keywordtype">void</span> <a class="code" href="class_physics_manager.html#768590a228cbd4fb653d50dfa7087b51" title="shutdown any resources used by the LevelManager.">shutdown</a>();  
<a name="l00086"></a>00086         
<a name="l00087"></a>00087         <span class="keywordtype">void</span> <a class="code" href="class_physics_manager.html#b95f8a7918570604ddb0640d29334850" title="Clears entity callbacks that have been registered. Should be called between levels...">clear</a>(); 
<a name="l00088"></a>00088 
<a name="l00089"></a>00089         
<a name="l00090"></a>00090 };
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 
<a name="l00093"></a><a class="code" href="_physics_manager_8h.html#291005ba67db442bd78d8787ef185998">00093</a> load in physics <a class="code" href="_physics_manager_8h.html#291005ba67db442bd78d8787ef185998">materials</a>, give each type of <a class="code" href="_physics_manager_8h.html#8053f45f40a77e22d877d330cc46242c">material</a> a name.  Each <a class="code" href="_physics_manager_8h.html#8053f45f40a77e22d877d330cc46242c">material</a> can define any of the types of physical properties and a <span class="keywordtype">float</span> value <span class="keywordflow">for each</span> one.
<a name="l00094"></a>00094 Each entity definition refers to its <a class="code" href="_physics_manager_8h.html#8053f45f40a77e22d877d330cc46242c">material</a> name by <span class="keywordtype">string</span> name <span class="keywordflow">if</span> it has a <a class="code" href="_physics_manager_8h.html#8053f45f40a77e22d877d330cc46242c">material</a>.  This is associated with it when it is loaded in. Each entity definition also says whether it should have physics applied to it.
<a name="l00095"></a>00095 Each entity specifies which pair of <a class="code" href="_physics_manager_8h.html#291005ba67db442bd78d8787ef185998">materials</a> it wishes to be updated about <span class="keywordflow">if</span> a collision between them occurs.  The <a class="code" href="class_physics_manager.html" title="LevelManager organizes the transition of levels. It The current level should be retrieved...">PhysicsManager</a> will then call <span class="keyword">this</span> <a class="code" href="class_world_entity.html">WorldEntity</a> and tell them a collision occurred.  It will provide two <span class="keywordtype">string</span> names of the two <a class="code" href="_physics_manager_8h.html#291005ba67db442bd78d8787ef185998">materials</a> that collided.
<a name="l00096"></a>00096 For each entity that says it is interested in hearing about a collision we save it<span class="stringliteral">'s id.  We can then call it by retrieving it from the EntityManager and call its collide function.</span>
<a name="l00097"></a>00097 <span class="stringliteral">PhysicsManager must somehow store each material, then store each interested WorldEntity.  We create a Child class of CollisionCallbackObject that maintains the interested entity ids for that collision.</span>
<a name="l00098"></a>00098 <span class="stringliteral">There will have to be scripting at the point where WorldEntities are told about collisions.</span>
<a name="l00099"></a>00099 <span class="stringliteral">These collisions and creating more interesting obstacles and enemies will require scripting.</span>
<a name="l00100"></a>00100 <span class="stringliteral">PhysicsManager contains a map.  When a material is used by name to attach to another material for collision.  It is checked by name in the collisionMap, in both permutations.  If one exists, the pointer has another worldEntity added to its list.  If it doesn'</span>t exist it is added both ways.
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 Update: Instead of calling the collide method in <a class="code" href="class_world_entity.html">WorldEntity</a>.  We want each entity definition to be able to ask <span class="keywordflow">for</span> collision updates.  Not each instance of an entity.
<a name="l00104"></a>00104 So the <a class="code" href="_physics_manager_8h.html#8053f45f40a77e22d877d330cc46242c">material</a> pairs are listed in the entity list, not the specific entity definition.  
<a name="l00105"></a>00105 The method called will be something inside of a script. (to be determined later.)
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Mar 7 13:12:58 2008 for Bouncibility by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
